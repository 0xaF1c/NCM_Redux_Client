import{ah as m,d,r as s,b3 as v,b0 as f,an as y,ao as g,at as _,ae as h,ap as b,ai as C}from"./index-7904e8ad.js";import{p as S,f as T}from"./formatPlaylist-9c206ac5.js";import"./musicLikeBtn.vue_vue_type_script_setup_true_lang-a46553f4.js";import"./Ellipsis-c692ea86.js";import"./PageHeader-e12a2bfa.js";import"./text-4eec9490.js";import"./Grid-c77da12a.js";const k=()=>m.get("/record/recent/song"),R=d({__name:"history",setup(x){const e=s(),r=s(),l=s(10),o=v({id:-1,name:"最近播放",coverImgUrl:"",userId:0,createTime:0,playCount:0,trackCount:-1,tags:[],description:""}),{data:c,run:n}=f(k,{onSuccess(){var t;const a=T((t=c.value)==null?void 0:t.data.data.list.map(u=>u.data));r.value=a.slice(0,l.value),e.value=a,o.coverImgUrl=a[0].album.picUrl}}),i=a=>a.scrollHeight-a.clientHeight,p=a=>{var t;((t=a.currentTarget)==null?void 0:t.scrollTop)==i(a.currentTarget)&&(l.value+=10,r.value=e.value.slice(0,l.value))};return n(),(a,t)=>(h(),y(_(C),{"on-scroll":p},{default:g(()=>[b(S,{"render-playlist":r.value,"all-playlist":e.value,"playlist-matadata":o},null,8,["render-playlist","all-playlist","playlist-matadata"])]),_:1}))}});export{R as default};
