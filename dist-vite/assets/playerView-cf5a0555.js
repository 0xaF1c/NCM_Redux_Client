import{d as q,h as g,r as I,i as ft,a as ht,c as Q,u as Oe,b as Nt,w as wn,e as me,o as At,f as yn,p as We,g as xn,j as _n,m as zn,k as X,v as K,F as $n,T as mt,l as kn,N as Pt,n as Sn,q as A,s as Ge,t as b,x as G,y as he,z as Cn,A as Ft,B as xe,C as Ye,D as qe,E as Rn,G as Ke,L as Bn,H as Mn,I as re,J as Tn,K as In,M as wt,O as Vn,P as Nn,Q as An,R as Dt,S as ke,U as Pn,V as yt,W as Ve,X as st,Y as xt,Z as _t,_ as Fn,$ as Dn,a0 as Xe,a1 as En,a2 as Hn,a3 as On,a4 as Un,a5 as zt,a6 as Ln,a7 as jn,a8 as dt,a9 as Wn,aa as Xn,ab as Yn,ac as Ue,ad as qn,ae as E,af as Y,ag as B,ah as Et,ai as Ht,aj as vt,ak as gt,al as Je,am as Le,an as Ne,ao as C,ap as u,aq as Kn,ar as Ee,as as He,at as o,au as ce,av as ct,aw as Ot,ax as Ut,ay as $t,az as kt,aA as Fe,aB as ie,aC as Lt,aD as St,aE as de,aF as W,aG as jt,aH as Gn,aI as Jn,aJ as Ct,aK as Qn}from"./index-7904e8ad.js";import{N as Zn,u as Qe,a as eo,_ as pt,b as Wt,f as to,P as Xt,c as no}from"./musicLikeBtn.vue_vue_type_script_setup_true_lang-a46553f4.js";import{N as je}from"./Ellipsis-c692ea86.js";import{N as De}from"./text-4eec9490.js";import{N as oo}from"./Thing-2f426f7f.js";const ro=q({name:"Remove",render(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},g("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),ao=q({name:"NDrawerContent",inheritAttrs:!1,props:{blockScroll:Boolean,show:{type:Boolean,default:void 0},displayDirective:{type:String,required:!0},placement:{type:String,required:!0},contentStyle:[Object,String],nativeScrollbar:{type:Boolean,required:!0},scrollbarProps:Object,trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},showMask:{type:[Boolean,String],required:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,onClickoutside:Function,onAfterLeave:Function,onAfterEnter:Function,onEsc:Function},setup(e){const t=I(!!e.show),n=I(null),f=ft(ht);let i=0,d="",h=null;const x=I(!1),k=I(!1),_=Q(()=>e.placement==="top"||e.placement==="bottom"),{mergedClsPrefixRef:R,mergedRtlRef:L}=Oe(e),D=Nt("Drawer",L,R),z=y=>{k.value=!0,i=_.value?y.clientY:y.clientX,d=document.body.style.cursor,document.body.style.cursor=_.value?"ns-resize":"ew-resize",document.body.addEventListener("mousemove",H),document.body.addEventListener("mouseleave",P),document.body.addEventListener("mouseup",m)},T=()=>{h!==null&&(window.clearTimeout(h),h=null),k.value?x.value=!0:h=window.setTimeout(()=>{x.value=!0},300)},c=()=>{h!==null&&(window.clearTimeout(h),h=null),x.value=!1},{doUpdateHeight:S,doUpdateWidth:v}=f,V=y=>{const{maxWidth:p}=e;if(p&&y>p)return p;const{minWidth:j}=e;return j&&y<j?j:y},J=y=>{const{maxHeight:p}=e;if(p&&y>p)return p;const{minHeight:j}=e;return j&&y<j?j:y},H=y=>{var p,j;if(k.value)if(_.value){let Z=((p=n.value)===null||p===void 0?void 0:p.offsetHeight)||0;const se=i-y.clientY;Z+=e.placement==="bottom"?se:-se,Z=J(Z),S(Z),i=y.clientY}else{let Z=((j=n.value)===null||j===void 0?void 0:j.offsetWidth)||0;const se=i-y.clientX;Z+=e.placement==="right"?se:-se,Z=V(Z),v(Z),i=y.clientX}},m=()=>{k.value&&(i=0,k.value=!1,document.body.style.cursor=d,document.body.removeEventListener("mousemove",H),document.body.removeEventListener("mouseup",m),document.body.removeEventListener("mouseleave",P))},P=m;wn(()=>{e.show&&(t.value=!0)}),me(()=>e.show,y=>{y||m()}),At(()=>{m()});const F=Q(()=>{const{show:y}=e,p=[[K,y]];return e.showMask||p.push([Sn,e.onClickoutside,void 0,{capture:!0}]),p});function w(){var y;t.value=!1,(y=e.onAfterLeave)===null||y===void 0||y.call(e)}return yn(Q(()=>e.blockScroll&&t.value)),We(xn,n),We(_n,null),We(zn,null),{bodyRef:n,rtlEnabled:D,mergedClsPrefix:f.mergedClsPrefixRef,isMounted:f.isMountedRef,mergedTheme:f.mergedThemeRef,displayed:t,transitionName:Q(()=>({right:"slide-in-from-right-transition",left:"slide-in-from-left-transition",top:"slide-in-from-top-transition",bottom:"slide-in-from-bottom-transition"})[e.placement]),handleAfterLeave:w,bodyDirectives:F,handleMousedownResizeTrigger:z,handleMouseenterResizeTrigger:T,handleMouseleaveResizeTrigger:c,isDragging:k,isHoverOnResizeTrigger:x}},render(){const{$slots:e,mergedClsPrefix:t}=this;return this.displayDirective==="show"||this.displayed||this.show?X(g("div",{role:"none"},g($n,{disabled:!this.showMask||!this.trapFocus,active:this.show,autoFocus:this.autoFocus,onEsc:this.onEsc},{default:()=>g(mt,{name:this.transitionName,appear:this.isMounted,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave},{default:()=>X(g("div",kn(this.$attrs,{role:"dialog",ref:"bodyRef","aria-modal":"true",class:[`${t}-drawer`,this.rtlEnabled&&`${t}-drawer--rtl`,`${t}-drawer--${this.placement}-placement`,this.isDragging&&`${t}-drawer--unselectable`,this.nativeScrollbar&&`${t}-drawer--native-scrollbar`]}),[this.resizable?g("div",{class:[`${t}-drawer__resize-trigger`,(this.isDragging||this.isHoverOnResizeTrigger)&&`${t}-drawer__resize-trigger--hover`],onMouseenter:this.handleMouseenterResizeTrigger,onMouseleave:this.handleMouseleaveResizeTrigger,onMousedown:this.handleMousedownResizeTrigger}):null,this.nativeScrollbar?g("div",{class:`${t}-drawer-content-wrapper`,style:this.contentStyle,role:"none"},e):g(Pt,Object.assign({},this.scrollbarProps,{contentStyle:this.contentStyle,contentClass:`${t}-drawer-content-wrapper`,theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar}),e)]),this.bodyDirectives)})})),[[K,this.displayDirective==="if"||this.displayed||this.show]]):null}}),{cubicBezierEaseIn:lo,cubicBezierEaseOut:io}=Ge;function so({duration:e="0.3s",leaveDuration:t="0.2s",name:n="slide-in-from-right"}={}){return[A(`&.${n}-transition-leave-active`,{transition:`transform ${t} ${lo}`}),A(`&.${n}-transition-enter-active`,{transition:`transform ${e} ${io}`}),A(`&.${n}-transition-enter-to`,{transform:"translateX(0)"}),A(`&.${n}-transition-enter-from`,{transform:"translateX(100%)"}),A(`&.${n}-transition-leave-from`,{transform:"translateX(0)"}),A(`&.${n}-transition-leave-to`,{transform:"translateX(100%)"})]}const{cubicBezierEaseIn:co,cubicBezierEaseOut:uo}=Ge;function fo({duration:e="0.3s",leaveDuration:t="0.2s",name:n="slide-in-from-left"}={}){return[A(`&.${n}-transition-leave-active`,{transition:`transform ${t} ${co}`}),A(`&.${n}-transition-enter-active`,{transition:`transform ${e} ${uo}`}),A(`&.${n}-transition-enter-to`,{transform:"translateX(0)"}),A(`&.${n}-transition-enter-from`,{transform:"translateX(-100%)"}),A(`&.${n}-transition-leave-from`,{transform:"translateX(0)"}),A(`&.${n}-transition-leave-to`,{transform:"translateX(-100%)"})]}const{cubicBezierEaseIn:ho,cubicBezierEaseOut:mo}=Ge;function vo({duration:e="0.3s",leaveDuration:t="0.2s",name:n="slide-in-from-top"}={}){return[A(`&.${n}-transition-leave-active`,{transition:`transform ${t} ${ho}`}),A(`&.${n}-transition-enter-active`,{transition:`transform ${e} ${mo}`}),A(`&.${n}-transition-enter-to`,{transform:"translateY(0)"}),A(`&.${n}-transition-enter-from`,{transform:"translateY(-100%)"}),A(`&.${n}-transition-leave-from`,{transform:"translateY(0)"}),A(`&.${n}-transition-leave-to`,{transform:"translateY(-100%)"})]}const{cubicBezierEaseIn:go,cubicBezierEaseOut:po}=Ge;function bo({duration:e="0.3s",leaveDuration:t="0.2s",name:n="slide-in-from-bottom"}={}){return[A(`&.${n}-transition-leave-active`,{transition:`transform ${t} ${go}`}),A(`&.${n}-transition-enter-active`,{transition:`transform ${e} ${po}`}),A(`&.${n}-transition-enter-to`,{transform:"translateY(0)"}),A(`&.${n}-transition-enter-from`,{transform:"translateY(100%)"}),A(`&.${n}-transition-leave-from`,{transform:"translateY(0)"}),A(`&.${n}-transition-leave-to`,{transform:"translateY(100%)"})]}const wo=A([b("drawer",`
 word-break: break-word;
 line-height: var(--n-line-height);
 position: absolute;
 pointer-events: all;
 box-shadow: var(--n-box-shadow);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 background-color: var(--n-color);
 color: var(--n-text-color);
 box-sizing: border-box;
 `,[so(),fo(),vo(),bo(),G("unselectable",`
 user-select: none; 
 -webkit-user-select: none;
 `),G("native-scrollbar",[b("drawer-content-wrapper",`
 overflow: auto;
 height: 100%;
 `)]),he("resize-trigger",`
 position: absolute;
 background-color: #0000;
 transition: background-color .3s var(--n-bezier);
 `,[G("hover",`
 background-color: var(--n-resize-trigger-color-hover);
 `)]),b("drawer-content-wrapper",`
 box-sizing: border-box;
 `),b("drawer-content",`
 height: 100%;
 display: flex;
 flex-direction: column;
 `,[G("native-scrollbar",[b("drawer-body-content-wrapper",`
 height: 100%;
 overflow: auto;
 `)]),b("drawer-body",`
 flex: 1 0 0;
 overflow: hidden;
 `),b("drawer-body-content-wrapper",`
 box-sizing: border-box;
 padding: var(--n-body-padding);
 `),b("drawer-header",`
 font-weight: var(--n-title-font-weight);
 line-height: 1;
 font-size: var(--n-title-font-size);
 color: var(--n-title-text-color);
 padding: var(--n-header-padding);
 transition: border .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-divider-color);
 border-bottom: var(--n-header-border-bottom);
 display: flex;
 justify-content: space-between;
 align-items: center;
 `,[he("close",`
 margin-left: 6px;
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),b("drawer-footer",`
 display: flex;
 justify-content: flex-end;
 border-top: var(--n-footer-border-top);
 transition: border .3s var(--n-bezier);
 padding: var(--n-footer-padding);
 `)]),G("right-placement",`
 top: 0;
 bottom: 0;
 right: 0;
 `,[he("resize-trigger",`
 width: 3px;
 height: 100%;
 top: 0;
 left: 0;
 transform: translateX(-1.5px);
 cursor: ew-resize;
 `)]),G("left-placement",`
 top: 0;
 bottom: 0;
 left: 0;
 `,[he("resize-trigger",`
 width: 3px;
 height: 100%;
 top: 0;
 right: 0;
 transform: translateX(1.5px);
 cursor: ew-resize;
 `)]),G("top-placement",`
 top: 0;
 left: 0;
 right: 0;
 `,[he("resize-trigger",`
 width: 100%;
 height: 3px;
 bottom: 0;
 left: 0;
 transform: translateY(1.5px);
 cursor: ns-resize;
 `)]),G("bottom-placement",`
 left: 0;
 bottom: 0;
 right: 0;
 `,[he("resize-trigger",`
 width: 100%;
 height: 3px;
 top: 0;
 left: 0;
 transform: translateY(-1.5px);
 cursor: ns-resize;
 `)])]),A("body",[A(">",[b("drawer-container",{position:"fixed"})])]),b("drawer-container",`
 position: relative;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 `,[A("> *",{pointerEvents:"all"})]),b("drawer-mask",`
 background-color: rgba(0, 0, 0, .3);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[G("invisible",`
 background-color: rgba(0, 0, 0, 0)
 `),Cn({enterDuration:"0.2s",leaveDuration:"0.2s",enterCubicBezier:"var(--n-bezier-in)",leaveCubicBezier:"var(--n-bezier-out)"})])]),yo=Object.assign(Object.assign({},xe.props),{show:Boolean,width:[Number,String],height:[Number,String],placement:{type:String,default:"right"},maskClosable:{type:Boolean,default:!0},showMask:{type:[Boolean,String],default:!0},to:[String,Object],displayDirective:{type:String,default:"if"},nativeScrollbar:{type:Boolean,default:!0},zIndex:Number,onMaskClick:Function,scrollbarProps:Object,contentStyle:[Object,String],trapFocus:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,defaultWidth:{type:[Number,String],default:251},defaultHeight:{type:[Number,String],default:251},onUpdateWidth:[Function,Array],onUpdateHeight:[Function,Array],"onUpdate:width":[Function,Array],"onUpdate:height":[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,drawerStyle:[String,Object],drawerClass:String,target:null,onShow:Function,onHide:Function}),Yt=q({name:"Drawer",inheritAttrs:!1,props:yo,setup(e){const{mergedClsPrefixRef:t,namespaceRef:n,inlineThemeDisabled:f}=Oe(e),i=Ft(),d=xe("Drawer","-drawer",wo,In,e,t),h=I(e.defaultWidth),x=I(e.defaultHeight),k=Ye(qe(e,"width"),h),_=Ye(qe(e,"height"),x),R=Q(()=>{const{placement:m}=e;return m==="top"||m==="bottom"?"":wt(k.value)}),L=Q(()=>{const{placement:m}=e;return m==="left"||m==="right"?"":wt(_.value)}),D=m=>{const{onUpdateWidth:P,"onUpdate:width":F}=e;P&&re(P,m),F&&re(F,m),h.value=m},z=m=>{const{onUpdateHeight:P,"onUpdate:width":F}=e;P&&re(P,m),F&&re(F,m),x.value=m},T=Q(()=>[{width:R.value,height:L.value},e.drawerStyle||""]);function c(m){const{onMaskClick:P,maskClosable:F}=e;F&&V(!1),P&&P(m)}const S=Rn();function v(m){var P;(P=e.onEsc)===null||P===void 0||P.call(e),e.show&&e.closeOnEsc&&Mn(m)&&!S.value&&V(!1)}function V(m){const{onHide:P,onUpdateShow:F,"onUpdate:show":w}=e;F&&re(F,m),w&&re(w,m),P&&!m&&re(P,m)}We(ht,{isMountedRef:i,mergedThemeRef:d,mergedClsPrefixRef:t,doUpdateShow:V,doUpdateHeight:z,doUpdateWidth:D});const J=Q(()=>{const{common:{cubicBezierEaseInOut:m,cubicBezierEaseIn:P,cubicBezierEaseOut:F},self:{color:w,textColor:y,boxShadow:p,lineHeight:j,headerPadding:Z,footerPadding:se,bodyPadding:Se,titleFontSize:Ae,titleTextColor:_e,titleFontWeight:ze,headerBorderBottom:Ce,footerBorderTop:Re,closeIconColor:pe,closeIconColorHover:$e,closeIconColorPressed:Be,closeColorHover:le,closeColorPressed:ve,closeIconSize:be,closeSize:ue,closeBorderRadius:we,resizableTriggerColorHover:Pe}}=d.value;return{"--n-line-height":j,"--n-color":w,"--n-text-color":y,"--n-box-shadow":p,"--n-bezier":m,"--n-bezier-out":F,"--n-bezier-in":P,"--n-header-padding":Z,"--n-body-padding":Se,"--n-footer-padding":se,"--n-title-text-color":_e,"--n-title-font-size":Ae,"--n-title-font-weight":ze,"--n-header-border-bottom":Ce,"--n-footer-border-top":Re,"--n-close-icon-color":pe,"--n-close-icon-color-hover":$e,"--n-close-icon-color-pressed":Be,"--n-close-size":ue,"--n-close-color-hover":le,"--n-close-color-pressed":ve,"--n-close-icon-size":be,"--n-close-border-radius":we,"--n-resize-trigger-color-hover":Pe}}),H=f?Ke("drawer",void 0,J,e):void 0;return{mergedClsPrefix:t,namespace:n,mergedBodyStyle:T,handleMaskClick:c,handleEsc:v,mergedTheme:d,cssVars:f?void 0:J,themeClass:H==null?void 0:H.themeClass,onRender:H==null?void 0:H.onRender,isMounted:i}},render(){const{mergedClsPrefix:e}=this;return g(Bn,{to:this.to,show:this.show},{default:()=>{var t;return(t=this.onRender)===null||t===void 0||t.call(this),X(g("div",{class:[`${e}-drawer-container`,this.namespace,this.themeClass],style:this.cssVars,role:"none"},this.showMask?g(mt,{name:"fade-in-transition",appear:this.isMounted},{default:()=>this.show?g("div",{"aria-hidden":!0,class:[`${e}-drawer-mask`,this.showMask==="transparent"&&`${e}-drawer-mask--invisible`],onClick:this.handleMaskClick}):null}):null,g(ao,Object.assign({},this.$attrs,{class:[this.drawerClass,this.$attrs.class],style:[this.mergedBodyStyle,this.$attrs.style],blockScroll:this.blockScroll,contentStyle:this.contentStyle,placement:this.placement,scrollbarProps:this.scrollbarProps,show:this.show,displayDirective:this.displayDirective,nativeScrollbar:this.nativeScrollbar,onAfterEnter:this.onAfterEnter,onAfterLeave:this.onAfterLeave,trapFocus:this.trapFocus,autoFocus:this.autoFocus,resizable:this.resizable,maxHeight:this.maxHeight,minHeight:this.minHeight,maxWidth:this.maxWidth,minWidth:this.minWidth,showMask:this.showMask,onEsc:this.handleEsc,onClickoutside:this.handleMaskClick}),this.$slots)),[[Tn,{zIndex:this.zIndex,enabled:this.show}]])}})}}),xo={title:{type:String},headerStyle:[Object,String],footerStyle:[Object,String],bodyStyle:[Object,String],bodyContentStyle:[Object,String],nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,closable:Boolean},qt=q({name:"DrawerContent",props:xo,setup(){const e=ft(ht,null);e||Vn("drawer-content","`n-drawer-content` must be placed inside `n-drawer`.");const{doUpdateShow:t}=e;function n(){t(!1)}return{handleCloseClick:n,mergedTheme:e.mergedThemeRef,mergedClsPrefix:e.mergedClsPrefixRef}},render(){const{title:e,mergedClsPrefix:t,nativeScrollbar:n,mergedTheme:f,bodyStyle:i,bodyContentStyle:d,headerStyle:h,footerStyle:x,scrollbarProps:k,closable:_,$slots:R}=this;return g("div",{role:"none",class:[`${t}-drawer-content`,n&&`${t}-drawer-content--native-scrollbar`]},R.header||e||_?g("div",{class:`${t}-drawer-header`,style:h,role:"none"},g("div",{class:`${t}-drawer-header__main`,role:"heading","aria-level":"1"},R.header!==void 0?R.header():e),_&&g(Nn,{onClick:this.handleCloseClick,clsPrefix:t,class:`${t}-drawer-header__close`,absolute:!0})):null,n?g("div",{class:`${t}-drawer-body`,style:i,role:"none"},g("div",{class:`${t}-drawer-body-content-wrapper`,style:d,role:"none"},R)):g(Pt,Object.assign({themeOverrides:f.peerOverrides.Scrollbar,theme:f.peers.Scrollbar},k,{class:`${t}-drawer-body`,contentClass:`${t}-drawer-body-content-wrapper`,contentStyle:d}),R),R.footer?g("div",{class:`${t}-drawer-footer`,style:x,role:"none"},R.footer()):null)}});function _o(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function zo(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function at(e){return e==null?!0:!Number.isNaN(e)}function Rt(e,t){return e==null?"":t===void 0?String(e):e.toFixed(t)}function lt(e){if(e===null)return null;if(typeof e=="number")return e;{const t=Number(e);return Number.isNaN(t)?null:t}}const $o=A([b("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),b("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),Bt=800,Mt=100,ko=Object.assign(Object.assign({},xe.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),So=q({name:"InputNumber",props:ko,setup(e){const{mergedBorderedRef:t,mergedClsPrefixRef:n,mergedRtlRef:f}=Oe(e),i=xe("InputNumber","-input-number",$o,Dn,e,n),{localeRef:d}=An("InputNumber"),h=Dt(e),{mergedSizeRef:x,mergedDisabledRef:k,mergedStatusRef:_}=h,R=I(null),L=I(null),D=I(null),z=I(e.defaultValue),T=qe(e,"value"),c=Ye(T,z),S=I(""),v=l=>{const $=String(l).split(".")[1];return $?$.length:0},V=l=>{const $=[e.min,e.max,e.step,l].map(N=>N===void 0?0:v(N));return Math.max(...$)},J=ke(()=>{const{placeholder:l}=e;return l!==void 0?l:d.value.placeholder}),H=ke(()=>{const l=lt(e.step);return l!==null?l===0?1:Math.abs(l):1}),m=ke(()=>{const l=lt(e.min);return l!==null?l:null}),P=ke(()=>{const l=lt(e.max);return l!==null?l:null}),F=l=>{const{value:$}=c;if(l===$){y();return}const{"onUpdate:value":N,onUpdateValue:U,onChange:ae}=e,{nTriggerFormInput:te,nTriggerFormChange:r}=h;ae&&re(ae,l),U&&re(U,l),N&&re(N,l),z.value=l,te(),r()},w=({offset:l,doUpdateIfValid:$,fixPrecision:N,isInputing:U})=>{const{value:ae}=S;if(U&&zo(ae))return!1;const te=(e.parse||_o)(ae);if(te===null)return $&&F(null),null;if(at(te)){const r=v(te),{precision:a}=e;if(a!==void 0&&a<r&&!N)return!1;let s=parseFloat((te+l).toFixed(a??V(te)));if(at(s)){const{value:M}=P,{value:O}=m;if(M!==null&&s>M){if(!$||U)return!1;s=M}if(O!==null&&s<O){if(!$||U)return!1;s=O}return e.validator&&!e.validator(s)?!1:($&&F(s),s)}}return!1},y=()=>{const{value:l}=c;if(at(l)){const{format:$,precision:N}=e;$?S.value=$(l):l===null||N===void 0||v(l)>N?S.value=Rt(l,void 0):S.value=Rt(l,N)}else S.value=String(l)};y();const p=ke(()=>w({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),j=ke(()=>{const{value:l}=c;if(e.validator&&l===null)return!1;const{value:$}=H;return w({offset:-$,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),Z=ke(()=>{const{value:l}=c;if(e.validator&&l===null)return!1;const{value:$}=H;return w({offset:+$,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function se(l){const{onFocus:$}=e,{nTriggerFormFocus:N}=h;$&&re($,l),N()}function Se(l){var $,N;if(l.target===(($=R.value)===null||$===void 0?void 0:$.wrapperElRef))return;const U=w({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(U!==!1){const r=(N=R.value)===null||N===void 0?void 0:N.inputElRef;r&&(r.value=String(U||"")),c.value===U&&y()}else y();const{onBlur:ae}=e,{nTriggerFormBlur:te}=h;ae&&re(ae,l),te(),Xe(()=>{y()})}function Ae(l){const{onClear:$}=e;$&&re($,l)}function _e(){const{value:l}=Z;if(!l){we();return}const{value:$}=c;if($===null)e.validator||F(pe());else{const{value:N}=H;w({offset:N,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function ze(){const{value:l}=j;if(!l){ue();return}const{value:$}=c;if($===null)e.validator||F(pe());else{const{value:N}=H;w({offset:-N,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const Ce=se,Re=Se;function pe(){if(e.validator)return null;const{value:l}=m,{value:$}=P;return l!==null?Math.max(0,l):$!==null?Math.min(0,$):0}function $e(l){Ae(l),F(null)}function Be(l){var $,N,U;!(($=D.value)===null||$===void 0)&&$.$el.contains(l.target)&&l.preventDefault(),!((N=L.value)===null||N===void 0)&&N.$el.contains(l.target)&&l.preventDefault(),(U=R.value)===null||U===void 0||U.activate()}let le=null,ve=null,be=null;function ue(){be&&(window.clearTimeout(be),be=null),le&&(window.clearInterval(le),le=null)}function we(){ge&&(window.clearTimeout(ge),ge=null),ve&&(window.clearInterval(ve),ve=null)}function Pe(){ue(),be=window.setTimeout(()=>{le=window.setInterval(()=>{ze()},Mt)},Bt),Ve("mouseup",document,ue,{once:!0})}let ge=null;function Ze(){we(),ge=window.setTimeout(()=>{ve=window.setInterval(()=>{_e()},Mt)},Bt),Ve("mouseup",document,we,{once:!0})}const et=()=>{ve||_e()},Me=()=>{le||ze()};function Te(l){var $,N;if(l.key==="Enter"){if(l.target===(($=R.value)===null||$===void 0?void 0:$.wrapperElRef))return;w({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((N=R.value)===null||N===void 0||N.deactivate())}else if(l.key==="ArrowUp"){if(!Z.value||e.keyboard.ArrowUp===!1)return;l.preventDefault(),w({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&_e()}else if(l.key==="ArrowDown"){if(!j.value||e.keyboard.ArrowDown===!1)return;l.preventDefault(),w({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ze()}}function Ie(l){S.value=l,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&w({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}me(c,()=>{y()});const tt={focus:()=>{var l;return(l=R.value)===null||l===void 0?void 0:l.focus()},blur:()=>{var l;return(l=R.value)===null||l===void 0?void 0:l.blur()},select:()=>{var l;return(l=R.value)===null||l===void 0?void 0:l.select()}},nt=Nt("InputNumber",f,n);return Object.assign(Object.assign({},tt),{rtlEnabled:nt,inputInstRef:R,minusButtonInstRef:L,addButtonInstRef:D,mergedClsPrefix:n,mergedBordered:t,uncontrolledValue:z,mergedValue:c,mergedPlaceholder:J,displayedValueInvalid:p,mergedSize:x,mergedDisabled:k,displayedValue:S,addable:Z,minusable:j,mergedStatus:_,handleFocus:Ce,handleBlur:Re,handleClear:$e,handleMouseDown:Be,handleAddClick:et,handleMinusClick:Me,handleAddMousedown:Ze,handleMinusMousedown:Pe,handleKeyDown:Te,handleUpdateDisplayedValue:Ie,mergedTheme:i,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:Q(()=>{const{self:{iconColorDisabled:l}}=i.value,[$,N,U,ae]=En(l);return{textColorTextDisabled:`rgb(${$}, ${N}, ${U})`,opacityDisabled:`${ae}`}})})},render(){const{mergedClsPrefix:e,$slots:t}=this,n=()=>g(_t,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>st(t["minus-icon"],()=>[g(xt,{clsPrefix:e},{default:()=>g(ro,null)})])}),f=()=>g(_t,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>st(t["add-icon"],()=>[g(xt,{clsPrefix:e},{default:()=>g(Fn,null)})])});return g("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},g(Pn,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var i;return this.showButton&&this.buttonPlacement==="both"?[n(),yt(t.prefix,d=>d?g("span",{class:`${e}-input-number-prefix`},d):null)]:(i=t.prefix)===null||i===void 0?void 0:i.call(t)},suffix:()=>{var i;return this.showButton?[yt(t.suffix,d=>d?g("span",{class:`${e}-input-number-suffix`},d):null),this.buttonPlacement==="right"?n():null,f()]:(i=t.suffix)===null||i===void 0?void 0:i.call(t)}}))}}),Co=b("layout-footer",`
 transition:
 box-shadow .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-sizing: border-box;
`,[G("absolute-positioned",`
 position: absolute;
 left: 0;
 right: 0;
 bottom: 0;
 `),G("bordered",`
 border-top: solid 1px var(--n-border-color);
 `)]),Ro=Object.assign(Object.assign({},xe.props),{inverted:Boolean,position:Hn,bordered:Boolean}),Bo=q({name:"LayoutFooter",props:Ro,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=Oe(e),f=xe("Layout","-layout-footer",Co,On,e,t),i=Q(()=>{const{common:{cubicBezierEaseInOut:h},self:x}=f.value,k={"--n-bezier":h};return e.inverted?(k["--n-color"]=x.footerColorInverted,k["--n-text-color"]=x.textColorInverted,k["--n-border-color"]=x.footerBorderColorInverted):(k["--n-color"]=x.footerColor,k["--n-text-color"]=x.textColor,k["--n-border-color"]=x.footerBorderColor),k}),d=n?Ke("layout-footer",Q(()=>e.inverted?"a":"b"),i,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:i,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return(e=this.onRender)===null||e===void 0||e.call(this),g("div",{class:[`${t}-layout-footer`,this.themeClass,this.position&&`${t}-layout-footer--${this.position}-positioned`,this.bordered&&`${t}-layout-footer--bordered`],style:this.cssVars},this.$slots)}});function Tt(e){return window.TouchEvent&&e instanceof window.TouchEvent}function It(){const e=I(new Map),t=n=>f=>{e.value.set(n,f)};return Un(()=>{e.value.clear()}),[e,t]}const Mo=A([b("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[G("reverse",[b("slider-handles",[b("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),b("slider-dots",[b("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),G("vertical",[b("slider-handles",[b("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),b("slider-marks",[b("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),b("slider-dots",[b("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),G("vertical",`
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[b("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[b("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),b("slider-rail",`
 height: 100%;
 `,[he("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),G("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),b("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[b("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),b("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[b("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),G("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[b("slider-handle",`
 cursor: not-allowed;
 `)]),G("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),A("&:hover",[b("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[he("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),b("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),G("active",[b("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[he("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),b("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),b("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[b("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),b("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[he("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),b("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[b("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[b("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[A("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),A("&:focus",[b("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[A("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),b("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[G("transition-disabled",[b("slider-dot","transition: none;")]),b("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[G("active","border: var(--n-dot-border-active);")])])]),b("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[zt()]),b("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[G("top",`
 margin-bottom: 12px;
 `),G("right",`
 margin-left: 12px;
 `),G("bottom",`
 margin-top: 12px;
 `),G("left",`
 margin-right: 12px;
 `),zt()]),Ln(b("slider",[b("slider-dot","background-color: var(--n-dot-color-modal);")])),jn(b("slider",[b("slider-dot","background-color: var(--n-dot-color-popover);")]))]),To=0,Io=Object.assign(Object.assign({},xe.props),{to:dt.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),ut=q({name:"Slider",props:Io,setup(e){const{mergedClsPrefixRef:t,namespaceRef:n,inlineThemeDisabled:f}=Oe(e),i=xe("Slider","-slider",Mo,qn,e,t),d=I(null),[h,x]=It(),[k,_]=It(),R=I(new Set),L=Dt(e),{mergedDisabledRef:D}=L,z=Q(()=>{const{step:r}=e;if(Number(r)<=0||r==="mark")return 0;const a=r.toString();let s=0;return a.includes(".")&&(s=a.length-a.indexOf(".")-1),s}),T=I(e.defaultValue),c=qe(e,"value"),S=Ye(c,T),v=Q(()=>{const{value:r}=S;return(e.range?r:[r]).map(Be)}),V=Q(()=>v.value.length>2),J=Q(()=>e.placement===void 0?e.vertical?"right":"top":e.placement),H=Q(()=>{const{marks:r}=e;return r?Object.keys(r).map(parseFloat):null}),m=I(-1),P=I(-1),F=I(-1),w=I(!1),y=I(!1),p=Q(()=>{const{vertical:r,reverse:a}=e;return r?a?"top":"bottom":a?"right":"left"}),j=Q(()=>{if(V.value)return;const r=v.value,a=le(e.range?Math.min(...r):e.min),s=le(e.range?Math.max(...r):r[0]),{value:M}=p;return e.vertical?{[M]:`${a}%`,height:`${s-a}%`}:{[M]:`${a}%`,width:`${s-a}%`}}),Z=Q(()=>{const r=[],{marks:a}=e;if(a){const s=v.value.slice();s.sort((ne,oe)=>ne-oe);const{value:M}=p,{value:O}=V,{range:ee}=e,fe=O?()=>!1:ne=>ee?ne>=s[0]&&ne<=s[s.length-1]:ne<=s[0];for(const ne of Object.keys(a)){const oe=Number(ne);r.push({active:fe(oe),label:a[ne],style:{[M]:`${le(oe)}%`}})}}return r});function se(r,a){const s=le(r),{value:M}=p;return{[M]:`${s}%`,zIndex:a===m.value?1:0}}function Se(r){return e.showTooltip||F.value===r||m.value===r&&w.value}function Ae(r){return w.value?!(m.value===r&&P.value===r):!0}function _e(r){var a;~r&&(m.value=r,(a=h.value.get(r))===null||a===void 0||a.focus())}function ze(){k.value.forEach((r,a)=>{Se(a)&&r.syncPosition()})}function Ce(r){const{"onUpdate:value":a,onUpdateValue:s}=e,{nTriggerFormInput:M,nTriggerFormChange:O}=L;s&&re(s,r),a&&re(a,r),T.value=r,M(),O()}function Re(r){const{range:a}=e;if(a){if(Array.isArray(r)){const{value:s}=v;r.join()!==s.join()&&Ce(r)}}else Array.isArray(r)||v.value[0]!==r&&Ce(r)}function pe(r,a){if(e.range){const s=v.value.slice();s.splice(a,1,r),Re(s)}else Re(r)}function $e(r,a,s){const M=s!==void 0;s||(s=r-a>0?1:-1);const O=H.value||[],{step:ee}=e;if(ee==="mark"){const oe=ue(r,O.concat(a),M?s:void 0);return oe?oe.value:a}if(ee<=0)return a;const{value:fe}=z;let ne;if(M){const oe=Number((a/ee).toFixed(fe)),ye=Math.floor(oe),ot=oe>ye?ye:ye-1,rt=oe<ye?ye:ye+1;ne=ue(a,[Number((ot*ee).toFixed(fe)),Number((rt*ee).toFixed(fe)),...O],s)}else{const oe=be(r);ne=ue(r,[...O,oe])}return ne?Be(ne.value):a}function Be(r){return Math.min(e.max,Math.max(e.min,r))}function le(r){const{max:a,min:s}=e;return(r-s)/(a-s)*100}function ve(r){const{max:a,min:s}=e;return s+(a-s)*r}function be(r){const{step:a,min:s}=e;if(Number(a)<=0||a==="mark")return r;const M=Math.round((r-s)/a)*a+s;return Number(M.toFixed(z.value))}function ue(r,a=H.value,s){if(!(a!=null&&a.length))return null;let M=null,O=-1;for(;++O<a.length;){const ee=a[O]-r,fe=Math.abs(ee);(s===void 0||ee*s>0)&&(M===null||fe<M.distance)&&(M={index:O,distance:fe,value:a[O]})}return M}function we(r){const a=d.value;if(!a)return;const s=Tt(r)?r.touches[0]:r,M=a.getBoundingClientRect();let O;return e.vertical?O=(M.bottom-s.clientY)/M.height:O=(s.clientX-M.left)/M.width,e.reverse&&(O=1-O),ve(O)}function Pe(r){if(D.value||!e.keyboard)return;const{vertical:a,reverse:s}=e;switch(r.key){case"ArrowUp":r.preventDefault(),ge(a&&s?-1:1);break;case"ArrowRight":r.preventDefault(),ge(!a&&s?-1:1);break;case"ArrowDown":r.preventDefault(),ge(a&&s?1:-1);break;case"ArrowLeft":r.preventDefault(),ge(!a&&s?1:-1);break}}function ge(r){const a=m.value;if(a===-1)return;const{step:s}=e,M=v.value[a],O=Number(s)<=0||s==="mark"?M:M+s*r;pe($e(O,M,r>0?1:-1),a)}function Ze(r){var a,s;if(D.value||!Tt(r)&&r.button!==To)return;const M=we(r);if(M===void 0)return;const O=v.value.slice(),ee=e.range?(s=(a=ue(M,O))===null||a===void 0?void 0:a.index)!==null&&s!==void 0?s:-1:0;ee!==-1&&(r.preventDefault(),_e(ee),et(),pe($e(M,v.value[ee]),ee))}function et(){w.value||(w.value=!0,Ve("touchend",document,Ie),Ve("mouseup",document,Ie),Ve("touchmove",document,Te),Ve("mousemove",document,Te))}function Me(){w.value&&(w.value=!1,Ue("touchend",document,Ie),Ue("mouseup",document,Ie),Ue("touchmove",document,Te),Ue("mousemove",document,Te))}function Te(r){const{value:a}=m;if(!w.value||a===-1){Me();return}const s=we(r);pe($e(s,v.value[a]),a)}function Ie(){Me()}function tt(r){m.value=r,D.value||(F.value=r)}function nt(r){m.value===r&&(m.value=-1,Me()),F.value===r&&(F.value=-1)}function l(r){F.value=r}function $(r){F.value===r&&(F.value=-1)}me(m,(r,a)=>void Xe(()=>P.value=a)),me(S,()=>{if(e.marks){if(y.value)return;y.value=!0,Xe(()=>{y.value=!1})}Xe(ze)}),At(()=>{Me()});const N=Q(()=>{const{self:{markFontSize:r,railColor:a,railColorHover:s,fillColor:M,fillColorHover:O,handleColor:ee,opacityDisabled:fe,dotColor:ne,dotColorModal:oe,handleBoxShadow:ye,handleBoxShadowHover:ot,handleBoxShadowActive:rt,handleBoxShadowFocus:an,dotBorder:ln,dotBoxShadow:sn,railHeight:dn,railWidthVertical:cn,handleSize:un,dotHeight:fn,dotWidth:hn,dotBorderRadius:mn,fontSize:vn,dotBorderActive:gn,dotColorPopover:pn},common:{cubicBezierEaseInOut:bn}}=i.value;return{"--n-bezier":bn,"--n-dot-border":ln,"--n-dot-border-active":gn,"--n-dot-border-radius":mn,"--n-dot-box-shadow":sn,"--n-dot-color":ne,"--n-dot-color-modal":oe,"--n-dot-color-popover":pn,"--n-dot-height":fn,"--n-dot-width":hn,"--n-fill-color":M,"--n-fill-color-hover":O,"--n-font-size":vn,"--n-handle-box-shadow":ye,"--n-handle-box-shadow-active":rt,"--n-handle-box-shadow-focus":an,"--n-handle-box-shadow-hover":ot,"--n-handle-color":ee,"--n-handle-size":un,"--n-opacity-disabled":fe,"--n-rail-color":a,"--n-rail-color-hover":s,"--n-rail-height":dn,"--n-rail-width-vertical":cn,"--n-mark-font-size":r}}),U=f?Ke("slider",void 0,N,e):void 0,ae=Q(()=>{const{self:{fontSize:r,indicatorColor:a,indicatorBoxShadow:s,indicatorTextColor:M,indicatorBorderRadius:O}}=i.value;return{"--n-font-size":r,"--n-indicator-border-radius":O,"--n-indicator-box-shadow":s,"--n-indicator-color":a,"--n-indicator-text-color":M}}),te=f?Ke("slider-indicator",void 0,ae,e):void 0;return{mergedClsPrefix:t,namespace:n,uncontrolledValue:T,mergedValue:S,mergedDisabled:D,mergedPlacement:J,isMounted:Ft(),adjustedTo:dt(e),dotTransitionDisabled:y,markInfos:Z,isShowTooltip:Se,shouldKeepTooltipTransition:Ae,handleRailRef:d,setHandleRefs:x,setFollowerRefs:_,fillStyle:j,getHandleStyle:se,activeIndex:m,arrifiedValues:v,followerEnabledIndexSet:R,handleRailMouseDown:Ze,handleHandleFocus:tt,handleHandleBlur:nt,handleHandleMouseEnter:l,handleHandleMouseLeave:$,handleRailKeyDown:Pe,indicatorCssVars:f?void 0:ae,indicatorThemeClass:te==null?void 0:te.themeClass,indicatorOnRender:te==null?void 0:te.onRender,cssVars:f?void 0:N,themeClass:U==null?void 0:U.themeClass,onRender:U==null?void 0:U.onRender}},render(){var e;const{mergedClsPrefix:t,themeClass:n,formatTooltip:f}=this;return(e=this.onRender)===null||e===void 0||e.call(this),g("div",{class:[`${t}-slider`,n,{[`${t}-slider--disabled`]:this.mergedDisabled,[`${t}-slider--active`]:this.activeIndex!==-1,[`${t}-slider--with-mark`]:this.marks,[`${t}-slider--vertical`]:this.vertical,[`${t}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},g("div",{class:`${t}-slider-rail`},g("div",{class:`${t}-slider-rail__fill`,style:this.fillStyle}),this.marks?g("div",{class:[`${t}-slider-dots`,this.dotTransitionDisabled&&`${t}-slider-dots--transition-disabled`]},this.markInfos.map(i=>g("div",{key:i.label,class:[`${t}-slider-dot`,{[`${t}-slider-dot--active`]:i.active}],style:i.style}))):null,g("div",{ref:"handleRailRef",class:`${t}-slider-handles`},this.arrifiedValues.map((i,d)=>{const h=this.isShowTooltip(d);return g(Wn,null,{default:()=>[g(Xn,null,{default:()=>g("div",{ref:this.setHandleRefs(d),class:`${t}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,style:this.getHandleStyle(i,d),onFocus:()=>{this.handleHandleFocus(d)},onBlur:()=>{this.handleHandleBlur(d)},onMouseenter:()=>{this.handleHandleMouseEnter(d)},onMouseleave:()=>{this.handleHandleMouseLeave(d)}},st(this.$slots.thumb,()=>[g("div",{class:`${t}-slider-handle`})]))}),this.tooltip&&g(Yn,{ref:this.setFollowerRefs(d),show:h,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(d),teleportDisabled:this.adjustedTo===dt.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>g(mt,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(d),onEnter:()=>{this.followerEnabledIndexSet.add(d)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(d)}},{default:()=>{var x;return h?((x=this.indicatorOnRender)===null||x===void 0||x.call(this),g("div",{class:[`${t}-slider-handle-indicator`,this.indicatorThemeClass,`${t}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof f=="function"?f(i):i)):null}})})]})})),this.marks?g("div",{class:`${t}-slider-marks`},this.markInfos.map(i=>g("div",{key:i.label,class:`${t}-slider-mark`,style:i.style},i.label))):null))}}),Vo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},No=B("g",{fill:"none"},[B("path",{d:"M15.75 6.01c.18 0 .344.063.473.168a5 5 0 0 1-3.004 8.818l-.216.004H8.56l1.22 1.22a.75.75 0 0 1 .072.976l-.072.084a.75.75 0 0 1-.977.073l-.084-.073l-2.5-2.5a.75.75 0 0 1-.072-.976l.072-.084l2.5-2.5a.75.75 0 0 1 1.133.976l-.072.084l-1.22 1.22h4.442a3.5 3.5 0 0 0 3.495-3.308l.005-.192c0-1.081-.49-2.048-1.26-2.69a.75.75 0 0 1 .508-1.3zm-5.53-3.29a.75.75 0 0 1 .977-.073l.084.073l2.5 2.5l.072.084a.75.75 0 0 1 .008.882l-.08.094l-2.5 2.5l-.084.073a.75.75 0 0 1-.883.007l-.094-.08l-.072-.084a.75.75 0 0 1-.008-.882l.08-.094L11.44 6.5h-4.44a3.5 3.5 0 0 0-3.496 3.308L3.498 10c0 1.083.492 2.051 1.265 2.693a.75.75 0 0 1-1.01 1.107a5 5 0 0 1 3.029-8.796L6.997 5h4.441L10.22 3.78l-.072-.084a.75.75 0 0 1 .072-.976z",fill:"currentColor"})],-1),Ao=[No],Po=q({name:"ArrowRepeatAll20Filled",render:function(t,n){return E(),Y("svg",Vo,Ao)}}),Fo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Do=B("g",{fill:"none"},[B("path",{d:"M2.222 2.222a.75.75 0 0 1 .977-.073l.084.073l14.496 14.495l.072.084a.75.75 0 0 1-1.049 1.05l-.084-.073l-2.853-2.852a5.012 5.012 0 0 1-.57.065l-.292.009l-4.442-.001l1.22 1.22a.75.75 0 0 1 .072.977l-.072.084a.75.75 0 0 1-.977.073l-.084-.073l-2.5-2.5a.75.75 0 0 1-.072-.976l.072-.085l2.5-2.5a.75.75 0 0 1 1.133.977l-.072.084L8.56 13.5h3.877L5.692 6.752a3.502 3.502 0 0 0-2.189 3.056L3.498 10c0 1.083.492 2.051 1.265 2.693a.75.75 0 0 1-1.01 1.107a4.999 4.999 0 0 1 .816-8.171L2.221 3.282l-.072-.084a.75.75 0 0 1 .072-.976zM15.751 6.01c.179 0 .343.063.472.168A4.98 4.98 0 0 1 18.003 10c0 1.52-.678 2.881-1.748 3.798l-1.066-1.065A3.493 3.493 0 0 0 16.503 10c0-1.08-.49-2.047-1.26-2.69a.75.75 0 0 1 .507-1.301zm-5.53-3.29a.75.75 0 0 1 .976-.073l.084.072l2.5 2.5l.072.085a.75.75 0 0 1 .008.882l-.08.094l-2.5 2.5l-.025.021l-1.057-1.057l.021-.025L11.44 6.5H8.953l-1.5-1.5h3.986L10.22 3.78l-.072-.084a.75.75 0 0 1 .072-.977z",fill:"currentColor"})],-1),Eo=[Do],Ho=q({name:"ArrowRepeatAllOff20Filled",render:function(t,n){return E(),Y("svg",Fo,Eo)}}),Oo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Uo=B("g",{fill:"none"},[B("path",{d:"M3 4.753c0-1.408 1.578-2.24 2.74-1.444l10.498 7.194a1.75 1.75 0 0 1 .01 2.88L5.749 20.685C4.59 21.492 3 20.66 3 19.248V4.753zM21 3.75a.75.75 0 0 0-1.5 0v16.5a.75.75 0 0 0 1.5 0V3.75z",fill:"currentColor"})],-1),Lo=[Uo],Kt=q({name:"Next24Filled",render:function(t,n){return E(),Y("svg",Oo,Lo)}}),jo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Wo=B("g",{fill:"none"},[B("path",{d:"M5.746 3a1.75 1.75 0 0 0-1.75 1.75v14.5c0 .966.784 1.75 1.75 1.75h3.5a1.75 1.75 0 0 0 1.75-1.75V4.75A1.75 1.75 0 0 0 9.246 3h-3.5zm9 0a1.75 1.75 0 0 0-1.75 1.75v14.5c0 .966.784 1.75 1.75 1.75h3.5a1.75 1.75 0 0 0 1.75-1.75V4.75A1.75 1.75 0 0 0 18.246 3h-3.5z",fill:"currentColor"})],-1),Xo=[Wo],Gt=q({name:"Pause24Filled",render:function(t,n){return E(),Y("svg",jo,Xo)}}),Yo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},qo=B("g",{fill:"none"},[B("path",{d:"M3 3.75a.75.75 0 0 1 1.5 0v16.5a.75.75 0 0 1-1.5 0V3.75zm18 1.003c0-1.408-1.578-2.24-2.74-1.444L7.763 10.503a1.75 1.75 0 0 0-.01 2.88l10.499 7.302c1.16.807 2.749-.024 2.749-1.437V4.753z",fill:"currentColor"})],-1),Ko=[qo],Jt=q({name:"Previous24Filled",render:function(t,n){return E(),Y("svg",Yo,Ko)}}),Go={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Jo=B("g",{fill:"none"},[B("path",{d:"M4 4a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v7h3v2a3 3 0 0 1-3 3h-4.207A5.5 5.5 0 0 0 4 9.207V4zm11 11a2 2 0 0 0 2-2v-1h-2v3zM7.5 5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm0 3a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2.5 6.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0zm-6-1.598v3.196a.5.5 0 0 0 .765.424l2.557-1.598a.5.5 0 0 0 0-.848l-2.557-1.598a.5.5 0 0 0-.765.424z",fill:"currentColor"})],-1),Qo=[Jo],Zo=q({name:"ReceiptPlay20Filled",render:function(t,n){return E(),Y("svg",Go,Qo)}}),er={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},tr=B("g",{fill:"none"},[B("path",{d:"M4 4a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v7h3v2a3 3 0 0 1-3 3h-4.207c.091-.322.154-.657.185-1H14V4a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v5.022a5.48 5.48 0 0 0-1 .185V4zm11 8v3a2 2 0 0 0 2-2v-1h-2zM7 5.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm3 6a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0zm-6-1.598v3.196a.5.5 0 0 0 .765.424l2.557-1.598a.5.5 0 0 0 0-.848l-2.557-1.598a.5.5 0 0 0-.765.424z",fill:"currentColor"})],-1),nr=[tr],or=q({name:"ReceiptPlay20Regular",render:function(t,n){return E(),Y("svg",er,nr)}}),rr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ar=B("g",{fill:"none"},[B("path",{d:"M3 6.5v-3a.5.5 0 0 1 1 0v1.207a7.978 7.978 0 0 1 5.406-2.685a7.96 7.96 0 0 1 2.531.214a8.003 8.003 0 0 1 1.713 14.885a7.952 7.952 0 0 1-3.147.863a7.95 7.95 0 0 1-5.15-1.472a7.977 7.977 0 0 1-3.28-5.426a8.034 8.034 0 0 1-.059-1.604a.5.5 0 1 1 .998.064A6.973 6.973 0 0 0 3 10c0 3.1 2.015 5.73 4.808 6.65a6.995 6.995 0 0 0 3.141.285a6.987 6.987 0 0 0 2.325-.746a7.003 7.003 0 0 0-3.795-13.17a7.106 7.106 0 0 0-1.923.42A7.02 7.02 0 0 0 4.255 6H6a.5.5 0 0 1 0 1H3.5a.502.502 0 0 1-.5-.5zm4.5 1.467c0-.93.98-1.535 1.812-1.117l4.04 2.033c.917.462.917 1.772 0 2.234l-4.04 2.032A1.25 1.25 0 0 1 7.5 12.034V7.967z",fill:"currentColor"})],-1),lr=[ar],ir=q({name:"Replay20Filled",render:function(t,n){return E(),Y("svg",rr,lr)}}),sr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},dr=B("g",{fill:"none"},[B("path",{d:"M14.704 3.44c.191.226.296.512.296.808V19.75a1.25 1.25 0 0 1-2.058.954l-4.967-4.206H4.25A2.25 2.25 0 0 1 2 14.248v-4.5a2.25 2.25 0 0 1 2.25-2.25h3.725l4.968-4.204a1.25 1.25 0 0 1 1.761.147z",fill:"currentColor"})],-1),cr=[dr],Qt=q({name:"Speaker024Filled",render:function(t,n){return E(),Y("svg",sr,cr)}}),ur={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},fr=B("g",{fill:"none"},[B("path",{d:"M14.704 3.44c.191.226.296.512.296.808V19.75a1.25 1.25 0 0 1-2.058.954l-4.967-4.206H4.25A2.25 2.25 0 0 1 2 14.248v-4.5a2.25 2.25 0 0 1 2.25-2.25h3.725l4.968-4.204a1.25 1.25 0 0 1 1.761.147zM13.5 4.788l-4.975 4.21H4.25a.75.75 0 0 0-.75.75v4.5c0 .415.336.75.75.75h4.275L13.5 19.21V4.787z",fill:"currentColor"})],-1),hr=[fr],Zt=q({name:"Speaker024Regular",render:function(t,n){return E(),Y("svg",ur,hr)}}),mr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},vr=B("g",{fill:"none"},[B("path",{d:"M14.704 3.442c.191.226.296.512.296.808v15.502a1.25 1.25 0 0 1-2.058.954L7.975 16.5H4.25A2.25 2.25 0 0 1 2 14.25v-4.5A2.25 2.25 0 0 1 4.25 7.5h3.725l4.968-4.204a1.25 1.25 0 0 1 1.761.147zm2.4 5.198a.75.75 0 0 1 1.03.25c.574.94.862 1.992.862 3.14c0 1.149-.288 2.201-.862 3.141a.75.75 0 1 1-1.28-.781c.428-.702.642-1.483.642-2.36c0-.876-.214-1.657-.642-2.359a.75.75 0 0 1 .25-1.03z",fill:"currentColor"})],-1),gr=[vr],en=q({name:"Speaker124Filled",render:function(t,n){return E(),Y("svg",mr,gr)}}),pr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},br=B("g",{fill:"none"},[B("path",{d:"M14.704 3.442c.191.226.296.512.296.808v15.502a1.25 1.25 0 0 1-2.058.954L7.975 16.5H4.25A2.25 2.25 0 0 1 2 14.25v-4.5A2.25 2.25 0 0 1 4.25 7.5h3.725l4.968-4.204a1.25 1.25 0 0 1 1.761.147zM13.5 4.79L8.525 9H4.25a.75.75 0 0 0-.75.75v4.5c0 .415.336.75.75.75h4.275l4.975 4.213V4.79zm3.604 3.851a.75.75 0 0 1 1.03.25c.574.94.862 1.992.862 3.14c0 1.149-.288 2.201-.862 3.141a.75.75 0 1 1-1.28-.781c.428-.702.642-1.483.642-2.36c0-.876-.214-1.657-.642-2.359a.75.75 0 0 1 .25-1.03z",fill:"currentColor"})],-1),wr=[br],tn=q({name:"Speaker124Regular",render:function(t,n){return E(),Y("svg",pr,wr)}}),yr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},xr=B("g",{fill:"none"},[B("path",{d:"M15 4.25v15.496c0 1.079-1.274 1.651-2.08.934l-4.492-3.994a.75.75 0 0 0-.498-.189H4.25A2.25 2.25 0 0 1 2 14.247V9.749A2.25 2.25 0 0 1 4.25 7.5h3.68a.75.75 0 0 0 .498-.19l4.491-3.993C13.726 2.6 15 3.172 15 4.25zm3.992 1.648a.75.75 0 0 1 1.049.156A9.959 9.959 0 0 1 22 12.001a9.96 9.96 0 0 1-1.96 5.946a.75.75 0 0 1-1.205-.893a8.459 8.459 0 0 0 1.665-5.053a8.459 8.459 0 0 0-1.665-5.054a.75.75 0 0 1 .157-1.05zM17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.329a6.973 6.973 0 0 1-.84 3.328a.75.75 0 0 1-1.32-.714c.42-.777.66-1.667.66-2.614c0-.948-.24-1.838-.66-2.615a.75.75 0 0 1 .303-1.016z",fill:"currentColor"})],-1),_r=[xr],nn=q({name:"Speaker224Filled",render:function(t,n){return E(),Y("svg",yr,_r)}}),zr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},$r=B("g",{fill:"none"},[B("path",{d:"M15 4.25c0-1.08-1.274-1.651-2.08-.935L8.427 7.31a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.748v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.993c.806.717 2.081.145 2.081-.934V4.25zM9.425 8.43L13.5 4.806v14.382l-4.075-3.623a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.748a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.568zm9.567-2.533a.75.75 0 0 1 1.049.156A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.947a.75.75 0 1 1-1.205-.893A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.053a.75.75 0 0 1 .157-1.05zm-1.849 2.472a.75.75 0 0 1 1.017.302c.536.991.84 2.125.84 3.329a6.973 6.973 0 0 1-.84 3.328a.75.75 0 0 1-1.32-.714c.42-.777.66-1.667.66-2.615c0-.947-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.016z",fill:"currentColor"})],-1),kr=[$r],on=q({name:"Speaker224Regular",render:function(t,n){return E(),Y("svg",zr,kr)}}),Sr=e=>Et.get("/song/url",{params:{id:e}}),Cr=q({components:{NDrawer:Yt,NDrawerContent:qt,NScrollbar:Ht,NDataTable:Zn,NEllipsis:je},props:{show:{type:Boolean,default:!0}},emits:["update:show"],mounted(){this.updatePlaylistData()},setup(){const e=vt(),{toggle:t}=Qe(),n=eo(),f=I();let i=15;const d=e.getters["player/getPlaylist"],h=z=>{var T;return z==((T=e.state.player.playlist[e.state.player.index])==null?void 0:T.id)},x={"--n-text-color-hover":n.value.baseColor,"--n-text-color":n.value.baseColor,"--n-text-color-disabled":n.value.baseColor,"--n-text-color-focus":n.value.baseColor,"--n-text-color-pressed":n.value.baseColor,margin:"0 2px"},k=[{key:"cover",render(z){return g(gt,{lazy:!0,src:z==null?void 0:z.cover,size:40})},width:10},{title:"标题",key:"name",render(z){return g(je,{style:"max-width: 100px"},z.songData.name)}},{title:"作者",key:"artists",render(z){return g(De,{},[z.songData.artists.map((T,c)=>[g(pt,{id:T.id,style:h(z.songData.id)?x:null},g(je,{style:"max-width: 100px"},T.name))])])}},{title:"专辑",key:"album",render(z){return g(Wt,{style:h(z.songData.id)?x:null,id:z.songData.album.id},g(je,{style:"max-width: 100px"},z.songData.album.name))}}],_=()=>{f.value=e.state.player.playlist.slice(0,i).map((z,T)=>({cover:z.album.picUrl,name:`${z.name}`,dt:`${to(z.dt,(c,S,v)=>`${S>9?S:"0"+S}:${v>9?v:"0"+v}`)}`,artists:`${z.artists[0].name}`,album:`${z.album.name}`,songData:z,index:T}))},R=(z,T)=>{const c=`
        --n-merged-td-color: ${n.value.primaryColor};
        --n-merged-td-color-hover: ${n.value.primaryColor};
        --n-td-text-color: ${n.value.baseColor};
        --n-text-color-hover: ${n.value.baseColor};
        --n-text-color: ${n.value.baseColor};
        --n-text-color-hover: ${n.value.baseColor};
        --n-text-color: ${n.value.baseColor};
        --n-text-color-disabled: ${n.value.baseColor};
        --n-text-color-focus: ${n.value.baseColor};
        --n-text-color-pressed: ${n.value.baseColor};
      `,S={ondblclick:()=>{e.commit("player/setIndex",T),setTimeout(()=>t(!1),1e3)},style:`
          height: 30px;
        `};return h(z.songData.id)&&(S.style+=c),S},L=z=>z.scrollHeight-z.clientHeight,D=z=>{var T;((T=z.currentTarget)==null?void 0:T.scrollTop)==L(z.currentTarget)&&(i+=10,_())};return me(()=>e.state.player.playlist,()=>{_()}),{playlist:d,columns:k,data:f,rowProps:R,updatePlaylistData:_,onScroll:D}}});function Rr(e,t,n,f,i,d){const h=Le("n-data-table"),x=Le("n-scrollbar"),k=Le("n-drawer-content"),_=Le("n-drawer");return E(),Ne(_,{show:e.show,title:"播放列表","show-mask":!1,"onUpdate:show":t[0]||(t[0]=R=>e.$emit("update:show",R)),"default-width":"600",placement:"right",size:"large",bordered:""},{default:C(()=>[u(k,{closable:"",title:"播放列表"},{default:C(()=>[u(x,{"on-scroll":e.onScroll},{default:C(()=>[u(h,{class:"n-data-table",columns:e.columns,data:e.data,"row-props":e.rowProps},null,8,["columns","data","row-props"])]),_:1},8,["on-scroll"])]),_:1})]),_:1},8,["show"])}const Br=Je(Cr,[["render",Rr]]),Mr=e=>Et.get("/lyric",{params:{id:e}});function bt(){const e=ft(Kn);if(e===void 0)throw new Error("usePlayerState() is called without provider.");return e}function Tr(e){var t,n,f;return{lyric:it(((t=e==null?void 0:e.lrc)==null?void 0:t.lyric)||""),tlyric:it(((n=e==null?void 0:e.tlyric)==null?void 0:n.lyric)||""),romalyric:it(((f=e==null?void 0:e.romalrc)==null?void 0:f.lyric)||""),lyricuser:e.lyricUser,transuser:e.transUser}}const Ir=/^(?<lyricTimestamps>(?:\[.+?\])+)(?!\[)(?<content>.+)$/gm,Vr=/\[(?<min>\d+):(?<sec>\d+)(?:\.|:)*(?<ms>\d+)*\]/g;function it(e){const t=[],n=f=>{let i=f.time,d=0,h=t.length-1;for(;d<=h;){const x=Math.floor((d+h)/2),k=t[x].time;if(k===i)return x;k<i?d=x+1:h=x-1}return d};for(const f of e.trim().matchAll(Ir)){const{lyricTimestamps:i,content:d}=f.groups;for(const h of i.matchAll(Vr)){const{min:x,sec:k,ms:_}=h.groups,R=h[0],L=Number(x)*60+Number(k)+Number(_??0)*.001,D={rawTime:R,time:L,content:Nr(d)};t.splice(n(D),0,D)}}return t}function Nr(e){let t=e.trim();return t.length<1?e:t}const rn=e=>(Ot("data-v-8fb5e22c"),e=e(),Ut(),e),Ar={class:"lyricContainer"},Pr=rn(()=>B("div",{class:"placeholder"},null,-1)),Fr=["name","onClick"],Dr={class:"lrc"},Er={key:0,class:"tlyric"},Hr={key:1,class:"romalyric"},Or=rn(()=>B("div",{class:"placeholder"},null,-1)),Ur=q({__name:"lyricRender",props:{id:{},duration:{},lycDelay:{},romaEnable:{type:Boolean},tlyricEnable:{type:Boolean}},setup(e){const t=e,{setProgress:n}=Qe(),f=bt(),i=I([]),d=I(0),h=I(0),x=I(!1),k=I(),_=c=>{var v,V;const S=document.querySelectorAll("div.lyricRow");S.forEach(J=>J==null?void 0:J.classList.remove("active")),(v=S[c])==null||v.classList.add("active"),x.value||k.value.scrollTo({top:((V=S[c])==null?void 0:V.offsetTop)-260,behavior:"smooth"})},R=()=>{var c;d.value=f.progress,(c=document.querySelectorAll("div.lyricRow"))==null||c.forEach((S,v)=>{const V=f.progress/100*f.duration;Math.abs(Number(S.getAttribute("name"))-Number(V))<1&&setTimeout(()=>{h.value=v,_(h.value)},t.lycDelay)})};R();const L=async()=>{var S;const c=await Mr(t.id);i.value=Tr(c==null?void 0:c.data),(S=k.value)==null||S.scrollTo({top:0})},D=(c,S)=>{n(Number(c.time)),_(S)};let z=null;const T=()=>{x.value=!0,z!=null&&clearTimeout(z),z=setTimeout(()=>{x.value=!1},500)};return me(()=>t.id,()=>{L()}),me(()=>f.progress,()=>{R()}),L(),(c,S)=>(E(),Ne(o(Ht),{ref_key:"lyricScrollbar",ref:k,style:{"max-height":"70vh",width:"500px","margin-top":"-120px"},onScroll:T},{default:C(()=>[B("div",Ar,[Pr,(E(!0),Y(He,null,Ee(i.value.lyric,(v,V)=>{var J,H;return E(),Y("div",{class:"lyricRow",name:v.time,onClick:m=>D(v,V)},[B("div",Dr,ce(v.content),1),t.tlyricEnable?(E(),Y("div",Er,ce((J=i.value.tlyric.find(m=>m.time==v.time))==null?void 0:J.content),1)):ct("",!0),t.romaEnable?(E(),Y("div",Hr,ce((H=i.value.romalyric.find(m=>m.time==v.time))==null?void 0:H.content),1)):ct("",!0)],8,Fr)}),256)),Or])]),_:1},512))}});const Lr=Je(Ur,[["__scopeId","data-v-8fb5e22c"]]);var jr=function(e,t){var n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n.getContext("2d")},Wr=function(e,t){t===void 0&&(t=1);var n=new Image;return e.startsWith("data")||(n.crossOrigin="Anonymous"),new Promise(function(f,i){n.onload=function(){var h=n.width*t,x=n.height*t,k=jr(h,x);k.drawImage(n,0,0,h,x);var _=k.getImageData(0,0,h,x),R=_.data;f(R)};var d=function(){return i(new Error("An error occurred attempting to load image"))};n.onerror=d,n.onabort=d,n.src=e})},Xr=function(e,t){for(var n={},f=0;f<e.length;f+=4){var i=e[f+3];if(i!==0){var d=Array.from(e.subarray(f,f+3));if(d.indexOf(void 0)===-1){var h=i&&i!==255?"rgba("+d.concat([i]).join(",")+")":"rgb("+d.join(",")+")";t.indexOf(h)===-1&&(n[h]?n[h].count++:n[h]={color:h,count:1})}}}var x=Object.values(n);return x.sort(function(k,_){return _.count-k.count})},Vt={ignore:[],scale:1},Yr=function(e,t){t===void 0&&(t=Vt);try{t=Object.assign({},Vt,t);var n=t.ignore,f=t.scale;return(f>1||f<=0)&&console.warn("You set scale to "+f+", which isn't between 0-1. This is either pointless (> 1) or a no-op (≤ 0)"),Promise.resolve(Wr(e,f)).then(function(i){return Xr(i,n)})}catch(i){return Promise.reject(i)}};const qr=e=>(Ot("data-v-eb733afa"),e=e(),Ut(),e),Kr={class:"controller"},Gr={class:"left"},Jr=qr(()=>B("span",null,"歌词延迟:",-1)),Qr={class:"middle"},Zr={class:"right"},ea=q({__name:"playerDetail",props:{song:{},show:{type:Boolean}},emits:["update:show","update:darkMode"],setup(e,{emit:t}){const n=e,f=vt(),i=bt(),{toggle:d}=Qe(),h=I(!1),x=I(!1),k=I(!1),_=I(!0),R=I(500),L=async()=>{var v;const T=await Yr((v=n.song)==null?void 0:v.album.picUrl,{scale:.3}),c=T.length<35?T.length-1:35;let S=0;for(let V=0;V<c;V++){const H=T[V].color.match(/\((.*?)\)/)[1].split(",");let m=0;H.forEach(P=>{m+=parseInt(P)}),S+=m/3}S/=c,x.value=S<255*.6,t("update:darkMode",x.value)};me(()=>n.song,()=>{L()});const D=()=>{f.commit("player/previous"),setTimeout(()=>d(!1),1e3)},z=()=>{f.commit("player/next"),setTimeout(()=>d(!1),1e3)};return(T,c)=>(E(),Ne(o(Jn),{theme:x.value?o(Gn):null},{default:C(()=>[u(o(Yt),{"close-on-esc":"",show:n.show,"onUpdate:show":c[8]||(c[8]=S=>t("update:show",S)),placement:"bottom",height:"100%",style:{overflow:"hidden"}},{default:C(()=>[u(o(qt),{class:"container",closable:"","header-style":"border: none;z-index: 2;"},{default:C(()=>{var S;return[B("div",{class:"shader",style:$t({backgroundImage:`url(${(S=n.song)==null?void 0:S.album.picUrl})`})},null,4),u(o(kt),{class:"content",justify:o(Fe)()?"flex-start":"space-evenly",align:"center",vertical:!!o(Fe)(),wrap:!1},{default:C(()=>[X(u(o(kt),{vertical:"",justify:"center",align:"center"},{default:C(()=>{var v;return[u(o(gt),{src:(v=n.song)==null?void 0:v.album.picUrl,size:o(Fe)()?300:500},null,8,["src","size"]),u(o(De),{class:"name"},{default:C(()=>{var V;return[ie(ce((V=n.song)==null?void 0:V.name),1)]}),_:1}),u(o(De),{class:"tns"},{default:C(()=>{var V,J;return[(E(!0),Y(He,null,Ee((V=n.song)==null?void 0:V.tns,H=>(E(),Y("span",null,ce(H),1))),256)),(E(!0),Y(He,null,Ee((J=n.song)==null?void 0:J.alias,H=>(E(),Y("span",null,ce(H),1))),256))]}),_:1}),u(o(De),{class:"artist"},{default:C(()=>[(E(!0),Y(He,null,Ee(n.song.artists,V=>(E(),Y("span",null,[u(pt,{id:V.id,onClick:c[0]||(c[0]=J=>t("update:show",!1))},{default:C(()=>[ie(ce(V.name),1)]),_:2},1032,["id"]),ie("   ")]))),256))]),_:1}),u(o(De),{class:"album"},{default:C(()=>[u(Wt,{id:n.song.album.id,onClick:c[1]||(c[1]=V=>t("update:show",!1))},{default:C(()=>{var V;return[ie(ce((V=n.song)==null?void 0:V.album.name),1)]}),_:1},8,["id"])]),_:1})]}),_:1},512),[[K,!o(Fe)()]]),u(Lr,{class:"lyricRender","lyc-delay":R.value,romaEnable:k.value,tlyricEnable:_.value,id:n.song.id,style:$t(o(Fe)()?{maxHeight:"100vh"}:{}),duration:n.song.dt},null,8,["lyc-delay","romaEnable","tlyricEnable","id","style","duration"])]),_:1},8,["justify","vertical"]),B("div",Kr,[B("div",Gr,[B("div",null,[Jr,u(o(Lt),{trigger:"hover"},{trigger:C(()=>[u(o(So),{value:R.value,"onUpdate:value":c[2]||(c[2]=v=>R.value=v),clearable:"","button-placement":"both",style:{width:"150px"},step:100},{suffix:C(()=>[ie(" ms ")]),_:1},8,["value"])]),default:C(()=>[ie(" 别调太大 会鬼畜 ")]),_:1})]),u(o(St),{size:"large",value:k.value,"onUpdate:value":c[3]||(c[3]=v=>k.value=v)},{checked:C(()=>[ie(" 罗马音 开 ")]),unchecked:C(()=>[ie(" 罗马音 关 ")]),_:1},8,["value"]),u(o(St),{size:"large",value:_.value,"onUpdate:value":c[4]||(c[4]=v=>_.value=v)},{checked:C(()=>[ie(" 翻译 开 ")]),unchecked:C(()=>[ie(" 翻译 关 ")]),_:1},8,["value"])]),B("div",Qr,[u(o(de),{size:"large",circle:"",quaternary:"",onClick:D},{default:C(()=>[u(o(W),{size:"25",component:o(Jt)},null,8,["component"])]),_:1}),u(o(de),{size:"large",circle:"",onClick:c[5]||(c[5]=v=>o(d)()),type:"primary"},{default:C(()=>[X(u(o(W),{size:"30",component:o(Gt)},null,8,["component"]),[[K,!o(i).paused]]),X(u(o(W),{size:"30",component:o(Xt)},null,8,["component"]),[[K,o(i).paused]])]),_:1}),u(o(de),{size:"large",circle:"",quaternary:"",onClick:z},{default:C(()=>[u(o(W),{size:"25",component:o(Kt)},null,8,["component"])]),_:1})]),B("div",Zr,[u(o(jt),{width:"trigger",trigger:"click",style:{height:"200px",display:"flex","justify-content":"center","z-index":"9999"},"content-style":"height:100%; padding: 0;","onUpdate:show":c[7]||(c[7]=v=>h.value=v)},{trigger:C(()=>[u(o(de),{size:"large",circle:"",quaternary:""},{icon:C(()=>[X(u(o(W),{size:"30",component:o(Zt)},null,8,["component"]),[[K,!h.value&&o(i).volume==0]]),X(u(o(W),{size:"30",component:o(tn)},null,8,["component"]),[[K,!h.value&&o(i).volume<.6&&o(i).volume>0]]),X(u(o(W),{size:"30",component:o(on)},null,8,["component"]),[[K,!h.value&&o(i).volume>.6]]),X(u(o(W),{size:"30",component:o(Qt)},null,8,["component"]),[[K,h.value&&o(i).volume==0]]),X(u(o(W),{size:"30",component:o(en)},null,8,["component"]),[[K,h.value&&o(i).volume<.6&&o(i).volume>0]]),X(u(o(W),{size:"30",component:o(nn)},null,8,["component"]),[[K,h.value&&o(i).volume>.6]])]),_:1})]),default:C(()=>[u(o(ut),{vertical:"",value:o(i).volume,"onUpdate:value":c[6]||(c[6]=v=>o(i).volume=v),step:.01,tooltip:!1,"format-tooltip":v=>`${Math.floor(v)}%`},null,8,["value","format-tooltip"])]),_:1})])])]}),_:1})]),_:1},8,["show"])]),_:1},8,["theme"]))}});const ta=Je(ea,[["__scopeId","data-v-eb733afa"]]);function na(e){if(isNaN(e))return"00:00";let t=parseInt(e),n=0;return t>=60&&(n=parseInt(t/60),t=parseInt(t%60),n>=60&&(n=parseInt(n%60))),n=n<10?"0"+n:n,t=t<10?"0"+t:t,n+":"+t}const oa={class:"container"},ra={class:"left"},aa={class:"middle"},la={class:"right"},ia=q({__name:"playerView",setup(e){const t=vt(),{toggle:n,setExternalUpdate:f,onEnded:i,loop:d,onTimeupdate:h,setProgress:x,onLoadeddata:k}=Qe(),_=bt(),R=I(!1),L=I(!1),D=I(0),z=I(["列表循环","单曲循环","播完歌单后暂停"]),T=I(!1),c=I(null);h(w=>{t.commit("player/setProgress",isNaN(w)?0:w)});let S=!0;Ct(()=>{k(()=>{S&&x(_.duration*(t.state.player.progress/100)),S=!1})}),i(()=>{D.value===0?P():D.value===2&&t.state.player.index===t.state.player.playlist.length-1&&t.commit("player/setIndex",0)});const v=()=>{f(!0);const w=()=>{f(!1),window.removeEventListener("mouseup",w)};window.addEventListener("mouseup",w)},V=()=>{R.value=!0},J=()=>{D.value===1&&d(!0),D.value===2?D.value=0:(d(!1),D.value++)},H=()=>{var y;const w=t.state.player.playlist[t.state.player.index];w!==void 0&&(w!==null||w!==void 0)&&(c.value=w,window.document.title=`${_.paused?" ":"▶"} ${(y=c.value)==null?void 0:y.name} - NCM_Redux`,console.log(c.value),navigator.mediaSession.metadata=new MediaMetadata({title:w.name,artist:w==null?void 0:w.artists.map(p=>p.name+" "),album:w==null?void 0:w.name,artwork:[{src:w==null?void 0:w.album.picUrl}]}),Sr(w==null?void 0:w.id).then(p=>{var j,Z;_.url=(Z=(j=p==null?void 0:p.data)==null?void 0:j.data[0])==null?void 0:Z.url,setTimeout(()=>n(!0),100)}))},m=()=>{t.commit("player/previous"),setTimeout(()=>n(!1),1e3)},P=()=>{t.commit("player/next"),setTimeout(()=>n(!1),1e3)},F=()=>{var w;window.document.title=`${_.paused?" ":"▶"} ${(w=c.value)==null?void 0:w.name} - NCM_Redux`,n()};return navigator.mediaSession.setActionHandler("play",()=>F()),navigator.mediaSession.setActionHandler("pause",()=>F()),navigator.mediaSession.setActionHandler("previoustrack",()=>m()),navigator.mediaSession.setActionHandler("nexttrack",()=>P()),navigator.mediaSession.setActionHandler("seekbackward",()=>m()),navigator.mediaSession.setActionHandler("seekforward",()=>P()),me(()=>t.state.player.index,()=>{H()}),me(()=>t.state.player.playlist,()=>{H()}),Ct(()=>{H()}),(w,y)=>(E(),Ne(o(Bo),{bordered:"",class:"player"},{default:C(()=>[B("div",oa,[B("div",ra,[u(o(oo),null,{avatar:C(()=>{var p;return[u(o(gt),{onClick:V,size:80,class:"cover",src:(p=c.value)==null?void 0:p.album.picUrl},null,8,["src"])]}),header:C(()=>{var p;return[ie(ce((p=c.value)==null?void 0:p.name),1)]}),description:C(()=>{var p;return[(E(!0),Y(He,null,Ee((p=c.value)==null?void 0:p.artists,j=>(E(),Ne(pt,{id:j.id,style:{"margin-right":"7px"}},{default:C(()=>[ie(ce(j.name),1)]),_:2},1032,["id"]))),256))]}),"header-extra":C(()=>{var p;return[u(no,{id:(p=c.value)==null?void 0:p.id},null,8,["id"])]}),_:1})]),B("div",aa,[u(o(de),{size:"large",circle:"",quaternary:"",onClick:m},{default:C(()=>[u(o(W),{size:"25",component:o(Jt)},null,8,["component"])]),_:1}),u(o(de),{size:"large",circle:"",onClick:F,type:"primary"},{default:C(()=>[X(u(o(W),{size:"30",component:o(Gt)},null,8,["component"]),[[K,!o(_).paused]]),X(u(o(W),{size:"30",component:o(Xt)},null,8,["component"]),[[K,o(_).paused]])]),_:1}),u(o(de),{size:"large",circle:"",quaternary:"",onClick:P},{default:C(()=>[u(o(W),{size:"25",component:o(Kt)},null,8,["component"])]),_:1})]),B("div",la,[u(o(jt),{width:"trigger",trigger:"click",style:{height:"200px",display:"flex","justify-content":"center","z-index":"9999"},"content-style":"height:100%; padding: 0;","onUpdate:show":y[1]||(y[1]=p=>T.value=p)},{trigger:C(()=>[u(o(de),{size:"large",circle:"",quaternary:""},{icon:C(()=>[X(u(o(W),{size:"30",component:o(Zt)},null,8,["component"]),[[K,!T.value&&o(_).volume==0]]),X(u(o(W),{size:"30",component:o(tn)},null,8,["component"]),[[K,!T.value&&o(_).volume<.6&&o(_).volume>0]]),X(u(o(W),{size:"30",component:o(on)},null,8,["component"]),[[K,!T.value&&o(_).volume>.6]]),X(u(o(W),{size:"30",component:o(Qt)},null,8,["component"]),[[K,T.value&&o(_).volume==0]]),X(u(o(W),{size:"30",component:o(en)},null,8,["component"]),[[K,T.value&&o(_).volume<.6&&o(_).volume>0]]),X(u(o(W),{size:"30",component:o(nn)},null,8,["component"]),[[K,T.value&&o(_).volume>.6]])]),_:1})]),default:C(()=>[u(o(ut),{vertical:"",value:o(_).volume,"onUpdate:value":y[0]||(y[0]=p=>o(_).volume=p),step:.01,tooltip:!1,"format-tooltip":p=>`${Math.floor(p)}%`},null,8,["value","format-tooltip"])]),_:1}),u(o(Lt),{trigger:"hover"},{trigger:C(()=>[u(o(de),{size:"large",circle:"",quaternary:"",onClick:J},{icon:C(()=>[X(u(o(W),{size:"30",component:o(ir)},null,8,["component"]),[[K,D.value==0]]),X(u(o(W),{size:"30",component:o(Po)},null,8,["component"]),[[K,D.value==1]]),X(u(o(W),{size:"30",component:o(Ho)},null,8,["component"]),[[K,D.value==2]])]),_:1})]),default:C(()=>[B("span",null,ce(z.value[D.value]),1)]),_:1}),u(o(de),{size:"large",circle:"",quaternary:"",onClick:y[2]||(y[2]=p=>L.value=!L.value)},{icon:C(()=>[X(u(o(W),{size:"30",component:o(or)},null,8,["component"]),[[K,!L.value]]),X(u(o(W),{size:"30",component:o(Zo)},null,8,["component"]),[[K,L.value]])]),_:1})])]),u(o(ut),{class:Qn(["progressSlider",{playerDetailActive:R.value}]),value:o(_).progress,"onUpdate:value":[y[3]||(y[3]=p=>o(_).progress=p),v],step:.001,"format-tooltip":p=>o(na)(o(_).duration*(o(_).progress/100))},{thumb:C(()=>[R.value?(E(),Ne(o(de),{key:0,text:"",circle:""})):ct("",!0)]),_:1},8,["class","value","format-tooltip"]),u(ta,{song:c.value,show:R.value,"onUpdate:show":y[4]||(y[4]=p=>R.value=p)},null,8,["song","show"]),u(Br,{"playlist-title":"aaa",show:L.value,"onUpdate:show":y[5]||(y[5]=p=>L.value=p)},null,8,["show"])]),_:1}))}});const ha=Je(ia,[["__scopeId","data-v-fd9e0e7a"]]);export{ha as default};
